{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\n\nlet userSelectedDate = Date();\n\nconst bottonStart = document.querySelector('button[data-start]');\nconst bottonStop = document.querySelector('button[data-stop]');\nconst bottonReset = document.querySelector('button[data-reset]');\nconst bottonRetorn = document.querySelector('button[data-retorn]');\nbottonStart.setAttribute('disabled', '');\nbottonStop.setAttribute('disabled', '');\nbottonReset.setAttribute('disabled', '');\nbottonRetorn.setAttribute('disabled', '');\n\nlet second = document.querySelector('span[data-seconds]');\nlet minutes = document.querySelector('span[data-minutes]');\nlet hours = document.querySelector('span[data-hours]');\nlet days = document.querySelector('span[data-days]');\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n\n  onClose(selectedDates) {\n    clearInterval(taimerInterval);\n    if (\n      second.textContent > 1 ||\n      minutes.textContent > 1 ||\n      hours.textContent > 1 ||\n      days.textContent > 1\n    ) {\n      tostStopolldtaimer();\n    }\n    rezering();\n    console.log(selectedDates[0]);\n    new Promise((resolve, reject) => {\n      setTimeout(() => {\n        if (selectedDates[0] - options.defaultDate > 0) {\n          resolve(\n            (userSelectedDate = selectedDates[0]),\n            bottonStart.removeAttribute('disabled'),\n            bottonStop.setAttribute('disabled', ''),\n            bottonReset.setAttribute('disabled', ''),\n            bottonRetorn.setAttribute('disabled', '')\n          );\n        } else {\n          reject(\n            tostPleasechooseadateinthefuture(),\n            bottonStart.setAttribute('disabled', '')\n          );\n        }\n      });\n    });\n\n    console.log('user selected:', userSelectedDate);\n  },\n};\n\nflatpickr('#datetime-picker', options);\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nconsole.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\nconsole.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\nconsole.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\nconsole.log(convertMs(userSelectedDate));\n\niziToast.settings({\n  timeout: 10000,\n  resetOnHover: true,\n  icon: 'material-icons',\n  transitionIn: 'flipInX',\n  transitionOut: 'flipOutX',\n  onOpening: function () {\n    console.log('callback abriu!');\n  },\n  onClosing: function () {\n    console.log('callback fechou!');\n  },\n});\n\nfunction getTaim(taimConteiner) {\n  second.textContent = taimConteiner.seconds.toString().padStart(2, '0');\n  minutes.textContent = taimConteiner.minutes.toString().padStart(2, '0');\n  hours.textContent = taimConteiner.hours.toString().padStart(2, '0');\n  days.textContent = taimConteiner.days.toString().padStart(2, '0');\n  if (\n    second.textContent < 0 &&\n    minutes.textContent < 0 &&\n    hours.textContent < 0 &&\n    days.textContent < 0\n  ) {\n    clearInterval(taimerInterval);\n    rezering();\n  }\n}\nfunction rezering() {\n  second.textContent = '00';\n  minutes.textContent = '00';\n  hours.textContent = '00';\n  days.textContent = '00';\n}\n\nlet taimerInterval;\n\nfunction taimerStart() {\n  tostTaimerStart();\n  bottonStart.setAttribute('disabled', '');\n  bottonReset.removeAttribute('disabled');\n  bottonStop.removeAttribute('disabled');\n  taimerInterval = setInterval(() => {\n    let taimConteinerMS = userSelectedDate.getTime() - Date.now();\n    let taimConteiner = convertMs(taimConteinerMS);\n    console.log(taimConteiner);\n    getTaim(taimConteiner);\n  }, 1000);\n}\nfunction taimerRetorn() {\n  tostTaimerRetorn();\n  bottonRetorn.setAttribute('disabled', '');\n  bottonStop.removeAttribute('disabled');\n  taimerInterval = setInterval(() => {\n    let taimConteinerMS = userSelectedDate.getTime() - Date.now();\n    let taimConteiner = convertMs(taimConteinerMS);\n    console.log(taimConteiner);\n    getTaim(taimConteiner);\n  }, 1000);\n}\nfunction taimerStop() {\n  tostTaimerStop();\n  clearInterval(taimerInterval);\n  bottonStop.setAttribute('disabled', '');\n  bottonRetorn.removeAttribute('disabled');\n}\nfunction taimerReset() {\n  tostTaimerReset();\n  rezering();\n  clearInterval(taimerInterval);\n  bottonStop.setAttribute('disabled', '');\n  bottonReset.setAttribute('disabled', '');\n  bottonRetorn.setAttribute('disabled', '');\n  flatpickr('#datetime-picker',options)\n}\n\nbottonStart.addEventListener('click', taimerStart);\nbottonRetorn.addEventListener('click', taimerRetorn);\nbottonStop.addEventListener('click', taimerStop);\nbottonReset.addEventListener('click', taimerReset);\n\n// tosts\nfunction tostStopolldtaimer() {\n  iziToast.info({\n    title: 'Info',\n    message: 'Stop olld taimer',\n  });\n}\nfunction tostPleasechooseadateinthefuture() {\n  iziToast.error({\n    title: 'Error',\n    message: 'Please choose a date in the future',\n  });\n}\nfunction tostTaimerRetorn() {\n  iziToast.success({\n    title: 'OK',\n    message: 'Taimer retorn',\n  });\n}\nfunction tostTaimerStart() {\n  iziToast.success({\n    title: 'OK',\n    message: 'Taimer start',\n  });\n}\nfunction tostTaimerStop() {\n  iziToast.warning({\n    title: 'Caution',\n    message: 'Taimer stop',\n  });\n}\nfunction tostTaimerReset() {\n  iziToast.warning({\n    title: 'Caution',\n    message: 'Taimer reset',\n  });\n}\n"],"names":["userSelectedDate","bottonStart","bottonStop","bottonReset","bottonRetorn","second","minutes","hours","days","options","selectedDates","taimerInterval","tostStopolldtaimer","rezering","resolve","reject","tostPleasechooseadateinthefuture","flatpickr","convertMs","ms","seconds","iziToast","getTaim","taimConteiner","taimerStart","tostTaimerStart","taimConteinerMS","taimerRetorn","tostTaimerRetorn","taimerStop","tostTaimerStop","taimerReset","tostTaimerReset"],"mappings":"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"}